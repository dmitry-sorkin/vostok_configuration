# Базовая конфигурация VOSTOK v9.0
# ------------------------
# Файл распространяется под лицензией CC-BY 4.0
# ------------------------
# Плата: BigTreeTech Octopus v1.1 F446
# Драйверы: 7x tmc2209
# Датчик автоуровня: BTT Microprobe
# Доп.оборудование: отсутствует
# https://github.com/bigtreetech/BIGTREETECH-OCTOPUS-V1.0/blob/master/Hardware/BIGTREETECH%20Octopus%20-%20PIN.pdf
#--------------------------------------------------------
#          Оборудование             |      Разъём       |
#-----------------------------------|-------------------|
# Мотор оси X                       | MOTOR0            |
# Мотор оси W                       | MOTOR1            |
# Левый мотор оси Y                 | MOTOR2            |
# Правый мотор оси Y                | MOTOR3            |
# Мотор оси Z                       | MOTOR4            |
# Мотор фидера левой головы         | MOTOR5            |
# Мотор фидера правой головы        | MOTOR6            |
# Нагреватель левой головы          | HE0               |
# Нагреватель правой головы         | HE1               |
# Нагреватель стола                 | HE2               |
# Термистор левой головы            | T0                |
# Термистор правой головы           | T1                |
# Термистор стола                   | TB                |
# Охлаждение хотэнда левой головы   | FAN0              |
# Охлаждение хотэнда правой головы  | FAN1              |
# Охлаждение модели                 | RGB_LED           |  #https://mellow.klipper.cn/en/docs/ProductDoc/ExtensionBoard/fly-7040/wiring/
# Охлаждение отсека электроники     | FAN3              |
# Концевик оси X                    | STOP0             |
# Концевик оси W                    | STOP1             |
# Концевик оси Y левый              | STOP2             |
# Концевик оси Y правый             | STOP3             |
# Датчик автоуровня                 | BLTouch           |
#--------------------------------------------------------
#
# Двигатели
#########################################################

[stepper motor_x]   #MOTOR0
step_pin: PF13
dir_pin: !PF12
enable_pin: !PF14
full_steps_per_rotation: 200

[stepper motor_w] #MOTOR1
step_pin: PG0
dir_pin: !PG1
enable_pin: !PF15
full_steps_per_rotation: 200

[stepper motor_yl] #MOTOR2
step_pin: PF11
dir_pin: !PG3
enable_pin: !PG5
full_steps_per_rotation: 200

[stepper motor_yr] #MOTOR3
step_pin: PG4
dir_pin: PC1
enable_pin: !PA0
full_steps_per_rotation: 200

[stepper motor_z] #MOTOR4
step_pin: PF9
dir_pin: !PF10     #направление вращения
enable_pin: !PG2
full_steps_per_rotation: 200

[extruder]  #MOTOR5
step_pin: PC13
dir_pin: !PF0
enable_pin: !PF1
full_steps_per_rotation: 200

[extruder1] #MOTOR6
step_pin: PE2
dir_pin: PE3
enable_pin: !PD4
full_steps_per_rotation: 200

#########################################################
# Драйверы
#########################################################

[tmc2209 stepper motor_x]
uart_pin: PC4
run_current: 1.1
stealthchop_threshold: 0
interpolate: False

[tmc2209 stepper motor_w]
uart_pin: PD11
run_current: 1.1
stealthchop_threshold: 0
interpolate: False

[tmc2209 stepper motor_yl]
sense_resistor: 0.110
uart_pin: PC6
run_current: 1.2
stealthchop_threshold: 0
interpolate: False

[tmc2209 stepper motor_yr]
sense_resistor: 0.110
uart_pin: PC7
run_current: 1.2
stealthchop_threshold: 0
interpolate: False

[tmc2209 stepper motor_z]
uart_pin: PF2
run_current: 1.2
stealthchop_threshold: 0

[tmc2209 extruder]
uart_pin: PE4
run_current: 1.2
stealthchop_threshold: 0

[tmc2209 extruder1]
uart_pin: PE1
run_current: 1.2
stealthchop_threshold: 0

#########################################################
# Концевики и датчик автоуровня
#########################################################

[carriage xc]
endstop_pin: ^PG6

[dual_carriage wc]
endstop_pin: ^PG9

[carriage ylc]
endstop_pin: ^PG10

[extra_carriage yrc]
endstop_pin: ^PG11

[probe]
pin: ^!PB7

[output_pin probe_enable]
pin: PB6
value: 0

[gcode_macro PROBE_DEPLOY]
gcode:
    SET_PIN PIN=probe_enable VALUE=1

[gcode_macro PROBE_STOW]
gcode:
    SET_PIN PIN=probe_enable VALUE=0

#########################################################
# Нагреватели и термисторы
#########################################################

[extruder]
heater_pin: PA2
sensor_pin: PF4

[extruder1]
heater_pin: PA3
sensor_pin: PF5

[heater_bed]
heater_pin: PB10
sensor_pin: PF3

#########################################################
# Вентиляторы
#########################################################

[fan]
pin: PB0  # !PD12 у Дмитрия

[heater_fan e0_fan]
pin: PA8

[heater_fan e1_fan]
pin: PE5

[controller_fan electronics_fan]
pin: PD13
