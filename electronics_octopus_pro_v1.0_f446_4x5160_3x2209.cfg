# Базовая конфигурация VOSTOK v9.0
# ------------------------
# Файл распространяется под лицензией CC-BY 4.0
# ------------------------
#
# Плата: BigTreeTech Octopus Pro v1.0 F446
# Драйверы: 4x tmc5160 + 3x tmc2209
# Датчик автоуровня: BTT Microprobe
# Доп.оборудование: подсветка отсека печати
#
#--------------------------------------------------------
#          Оборудование             |      Разъём       |
#-----------------------------------|-------------------|
# Мотор оси X                       | MOTOR0            |
# Мотор оси W                       | MOTOR1            |
# Левый мотор оси Y                 | MOTOR2            |
# Правый мотор оси Y                | MOTOR3            |
# Мотор оси Z                       | MOTOR4            |
# Мотор фидера левой головы         | MOTOR5            |
# Мотор фидера правой головы        | MOTOR6            |
# Нагреватель левой головы          | HE0               |
# Нагреватель правой головы         | HE1               |
# Нагреватель стола                 | HE2               |
# Термистор левой головы            | T0                |
# Термистор правой головы           | T1                |
# Термистор стола                   | TB                |
# Охлаждение хотэнда левой головы   | FAN0              |
# Охлаждение хотэнда правой головы  | FAN1              |
# Охлаждение модели                 | FAN2              |
# Охлаждение отсека электроники     | FAN3              |
# Концевик оси X                    | STOP0             |
# Концевик оси W                    | STOP1             |
# Концевик оси Y левый              | STOP2             |
# Концевик оси Y правый             | STOP3             |
# Датчик автоуровня                 | BLTouch           |
# Подсветка отсека печати           | HE3               |
#--------------------------------------------------------
#
# Двигатели
#########################################################

[stepper motor_x]
step_pin: PF13
dir_pin: !PF12
enable_pin: !PF14
full_steps_per_rotation: 200

[stepper motor_w]
step_pin: PG0
dir_pin: !PG1
enable_pin: !PF15
full_steps_per_rotation: 200

[stepper motor_yl]
step_pin: PF11
dir_pin: !PG3
enable_pin: !PG5
full_steps_per_rotation: 200

[stepper motor_yr]
step_pin: PG4
dir_pin: PC1
enable_pin: !PA0
full_steps_per_rotation: 200

[stepper motor_z]
step_pin: PF9
dir_pin: PF10
enable_pin: !PG2
full_steps_per_rotation: 200

[extruder]
step_pin: PC13
dir_pin: !PF0
enable_pin: !PF1
full_steps_per_rotation: 200

[extruder1]
step_pin: PE2
dir_pin: !PE3
enable_pin: !PD4
full_steps_per_rotation: 200

#########################################################
# Драйверы
#########################################################

[tmc5160 stepper motor_x]
cs_pin: PC4
spi_software_sclk_pin: PA5
spi_software_mosi_pin: PA7
spi_software_miso_pin: PA6
run_current: 1.8
stealthchop_threshold: 0
interpolate: False

[tmc5160 stepper motor_w]
cs_pin: PD11
spi_software_sclk_pin: PA5
spi_software_mosi_pin: PA7
spi_software_miso_pin: PA6
run_current: 1.8
stealthchop_threshold: 0
interpolate: False

[tmc5160 stepper motor_yl]
sense_resistor: 0.075
cs_pin: PC6
spi_software_sclk_pin: PA5
spi_software_mosi_pin: PA7
spi_software_miso_pin: PA6
run_current: 1.8
stealthchop_threshold: 0
interpolate: False

[tmc5160 stepper motor_yr]
sense_resistor: 0.075
cs_pin: PC7
spi_software_sclk_pin: PA5
spi_software_mosi_pin: PA7
spi_software_miso_pin: PA6
run_current: 1.8
stealthchop_threshold: 0
interpolate: False

[tmc2209 stepper motor_z]
uart_pin: PF2
run_current: 1.4
stealthchop_threshold: 0

[tmc2209 extruder]
uart_pin: PE4
run_current: 1.2
stealthchop_threshold: 0

[tmc2209 extruder1]
uart_pin: PE1
run_current: 1.2
stealthchop_threshold: 0

#########################################################
# Концевики и датчик автоуровня
#########################################################

[carriage xc]
endstop_pin: ^PG6

[dual_carriage wc]
endstop_pin: ^PG9

[carriage ylc]
endstop_pin: ^PG10

[extra_carriage yrc]
endstop_pin: ^PG11

[probe]
pin: ^!PB7

[output_pin probe_enable]
pin: PB6
value: 0

[gcode_macro PROBE_DEPLOY]
gcode:
    SET_PIN PIN=probe_enable VALUE=1

[gcode_macro PROBE_STOW]
gcode:
    SET_PIN PIN=probe_enable VALUE=0

#########################################################
# Нагреватели и термисторы
#########################################################

[extruder]
heater_pin: PA2
sensor_pin: PF4

[extruder1]
heater_pin: PA3
sensor_pin: PF5

[heater_bed]
heater_pin: PB10
sensor_pin: PF3

#########################################################
# Вентиляторы
#########################################################

[fan]
pin: !PD12

[heater_fan e0_fan]
pin: PA8

[heater_fan e1_fan]
pin: PE5

[controller_fan electronics_fan]
pin: PD13

#########################################################
# Подсветка
#########################################################

[led print_chamber_led]
white_pin: PB11
initial_WHITE: 1.0